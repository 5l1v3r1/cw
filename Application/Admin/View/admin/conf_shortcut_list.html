<extend name="public/template" />
<block name="headerlink">
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/jquery-nestable/jquery.nestable.css"/>
	<!-- END PAGE LEVEL STYLES -->
	<!-- END PAGE LEVEL STYLES -->
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/admin/pages/css/pagecode.css"/>
</block>
<block name="siderbarmenu">
  <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
		<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
		<li class="sidebar-toggler-wrapper">
			<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
			<div class="sidebar-toggler">
			</div>
			<!-- END SIDEBAR TOGGLER BUTTON -->
		</li>
		<!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
		<li class="sidebar-search-wrapper">
			<!-- BEGIN RESPONSIVE QUICK SEARCH FORM -->
			<!-- DOC: Apply "sidebar-search-bordered" class the below search form to have bordered search box -->
			<!-- DOC: Apply "sidebar-search-bordered sidebar-search-solid" class the below search form to have bordered & solid search box -->
			<form class="sidebar-search " action="extra_search.html" method="POST">
				<a href="javascript:;" class="remove">
				<i class="icon-close"></i>
				</a>
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Search..." />
					<span class="input-group-btn">
					<a href="javascript:;" class="btn submit"><i class="icon-magnifier"></i></a>
					</span>
				</div>
			</form>
			<!-- END RESPONSIVE QUICK SEARCH FORM -->
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-home"></i>
			<span class="title">Dashboard</span>
			<span class="selected"></span>
			<span class="arrow open"></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Dashboard/index');}">
					<i class="icon-bar-chart"></i>
					Default Dashboard</a>
				</li>
				<li>
					<a href="{:U('Dashboard/showDataMoneyAnalysis');}">
					<i class="icon-bar-chart"></i>
					Data Analysis</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-basket"></i>
			<span class="title">eCommerce</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Order/showDataAnalysisPage');}">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=2');}">
					<i class="icon-bell"></i>
					<span class="badge badge-danger">{$cin}</span>
					Orders Ongoing</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=4');}">
					<i class="fa fa-warning"></i>
					<span class="badge badge-danger">{$cin1}</span>
					<font color="red">Orders Warning</font></a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=1');}">
					<i class="fa fa-lock"></i>
					Complete Orders</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist?flag=3');}">
					<i class="icon-basket"></i>
					Orders All</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
				<i class="fa fa-code"></i>
				<span class="title">Workers</span>
				<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Worker/showDataAnalysisPage');}">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Worker/workerRecommandPage');}">
						<i class="fa fa-smile-o" aria-hidden="true"></i>
						Workers Recommand
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist');}">
						<i class="fa fa-list" aria-hidden="true"></i>
						ALL Workers Workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=4');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						free workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=5');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						busy workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=2');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						Income > 0
					</a>
				</li>
				<li >
					<a href="{:U('Worker/workerlist?type=1');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						Income = 0
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=3');}">
						<i class="fa fa-user-times" aria-hidden="true"></i>
						dead workers
					</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="fa fa-wrench" aria-hidden="true"></i>
			<span class="title">Tools</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Tool/exchangeToolPage');}">
						<i class="fa fa-exchange" aria-hidden="true"></i> Transfer Tools
					</a>
				</li>
			</ul>
		</li>
		<li class="start active open">
			<a href="javascript:;">
			<i class="icon-settings"></i>
			<span class="title">Configuration</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Configure/exchangelist');}">
						<i class="fa fa-line-chart" aria-hidden="true"></i>
						Exchange Rate
					</a>
				</li>
				<li >
					<a href="{:U('Configure/techlist');}">
						<i class="fa fa-microchip" aria-hidden="true"></i>
						Technologies Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/tradelist');}">
						<i class="fa fa-info-circle" aria-hidden="true"></i>
						Trade Conf
					</a>
				</li>
				<li class="active">
					<a href="{:U('Configure/shortcutlistpage');}">
						<i class="fa fa-sliders" aria-hidden="true"></i>
						Shortcut Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/tipslist');}">
						<i class="fa fa-calendar-check-o" aria-hidden="true"></i>
						Tips Conf
					</a>
				</li>

			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="fa fa-shield" aria-hidden="true"></i>
			<span class="title">Security</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Security/orderRecordPage');}">
						<i class="fa fa-list" aria-hidden="true"></i> Order Check
					</a>
				</li>
				<li >
					<a href="{:U('Security/sshRecordPage');}">
						<i class="fa fa-user-secret" aria-hidden="true"></i> SSH Check
					</a>
				</li>
			</ul>
		</li>
	</ul>
</block>
<block name="container">
	<div class="page-content">
			<!-- BEGIN PAGE HEADER-->
			<h3 class="page-title">
			Shortcut List <small>list shortcut</small>
			</h3>
			<div class="page-bar">
				<ul class="page-breadcrumb">
					<li>
						<i class="fa fa-home"></i>
						<a href="{:U('Dashboard/index');}">Home</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">Configuration</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">Shortcut List</a>
					</li>
				</ul>
			</div>
			<!-- END PAGE HEADER-->
			<!-- BEGIN PAGE CONTENT-->
			<div class="row">
				<div class="col-md-12">
					<!-- Begin: life time stats -->
					<div class="portlet">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-shopping-cart"></i>Shortcut Configure
							</div>
							<div class="actions">
								<a href="{:U('Configure/addshortcutpage');}" class="btn default yellow-stripe">
									<i class="fa fa-plus"></i>
									<span class="hidden-480"> Add New </span>
								</a>
							</div>
						</div>

						<div class="row">
							<!--  -->
							<div class="col-md-6">
												<div class="portlet box blue">
													<div class="portlet-title">
														<div class="caption">
															<i class="fa fa-comments"></i>Shortcut List
														</div>
														<div class="tools">
															<a href="javascript:;" class="collapse" data-original-title="" title="">
															</a>
															<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
															</a>
															<a href="javascript:;" class="reload" data-original-title="" title="">
															</a>
															<a href="javascript:;" class="remove" data-original-title="" title="">
															</a>
														</div>
													</div>
													<div class="portlet-body ">
														<div class="dd" id="nestable3">
															<ol class="dd-list" id="ool"></ol>


														</div>

													</div>
												</div>
											</div>

							<!-- -->
						</div>
						<!-- END PAGE CONTENT-->
					</div>
					<!-- End: life time stats -->
				</div>
			</div>
			<!-- END PAGE CONTENT-->
	</div>
</block>
<block name="footscript">
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/metronic3_7/assets/global/plugins/jquery-nestable/jquery.nestable.js"></script>
	<!-- END PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/metronic3_7/assets/global/scripts/metronic.js" type="text/javascript"></script>
	<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>

	<!-- END PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/clipboard/clipboard.min.js" type="text/javascript"></script>
	<script>
			jQuery(document).ready(function() {
				Metronic.init(); // init metronic core components
		 Layout.init(); // init current layout
		 QuickSidebar.init(); // init quick sidebar
		 //Demo.init(); // init demo features
				//UINestable.init();
			});
		getdata();
		function getdata(){
			$.ajax({
					url: "{:U('Configure/shortcutlist');}", // server url
					type: 'GET', //POST or GET
					datatype: 'json',
					success: function(data) {
						//callback(data); // return data in callback
						//console.log(data);
						drawnestble(data);



					},
					error: function(xhr, status, error) {
							alert(xhr.responseText);
					}
				});
		}


		function senddate(data){
			$.ajax({
				url: "{:U('Configure/updateshortcutsort');}", // server url
				type: 'GET', //POST or GET
				data:{"data":data},
				datatype: 'json',
				success: function(data) {
					//callback(data); // return data in callback
					//console.log(data);




				},
				error: function(xhr, status, error) {
						alert(xhr.responseText);
				}
			});
		}


		//drawnestble()
	function drawnestble(data){
		$("#ool").html("");
		for(var i=0;i<data.length;i++){
		    //console.log(data[i].ID);
			var href= "{:U('Configure/editshortcutpage');}";
			//console.log(href);
			var trc = '\
	<li class="dd-item dd3-item" data-id="'+data[i].ID+'">\
		<div class="dd-handle dd3-handle"></div><div class="dd3-content" "><a class="btn btn-xs '+ data[i].style +'">'+ data[i].style +'</a><i class="'+data[i].icon+'" aria-hidden="true"></i> URL:'+ data[i].name +'<span class="btn red btn-xs pull-right delgroup" id="del'+data[i].ID+'">DEL</span><a class="btn green btn-xs pull-right" href = "'+href+'/ID/'+ data[i].ID +'" id="edit'+data[i].ID+'">EDIT</a></div>\
	</li>\
	';
			$("#ool").append(trc);

		}
		//uinestable();


	}
	function updateOutput(e) {

        var list = e.length ? e : $(e.target),
            output = list.data('output');
			senddate(list.nestable('serialize'));
		    //console.log(list.nestable('serialize'));
        	if (window.JSON) {
				//console.log(list.nestable('serialize'));
			} else {
				console.log("none");
			}
    }
	uinestable();

	function uinestable() {
		$('#nestable3').nestable({
			group: 1
		})
		.on('change', updateOutput);
	}

	$("#del1").on("click",function(){

		//测试操作代码
		//alert($(this).val());

	});
	$(document).on('click', '.delgroup', function(){
	  //console.log($(this).attr("id"));
      var sid = $(this).attr("id")
	  $.ajax({
		url: "{:U('Configure/delshortcut');}", // server url
		type: 'GET', //POST or GET
		data:{"sid":sid},
		datatype: 'json',
		success: function(data) {
			//callback(data); // return data in callback
			//console.log(data);
			getdata();




		},
		error: function(xhr, status, error) {
				alert(xhr.responseText);
		}
	});
	});


</script>
</block>
