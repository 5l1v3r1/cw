<extend name="public/template" />
<block name="headerlink">
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>
	<!-- END PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/clockface/css/clockface.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker3.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-colorpicker/css/colorpicker.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"/>

</block>
<block name="siderbarmenu">
	<ul class="page-sidebar-menu page-sidebar-menu-closed" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
		<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
		<li class="sidebar-toggler-wrapper">
			<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
			<div class="sidebar-toggler">
			</div>
			<!-- END SIDEBAR TOGGLER BUTTON -->
		</li>
		<!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
		<li class="sidebar-search-wrapper">
			<!-- BEGIN RESPONSIVE QUICK SEARCH FORM -->
			<!-- DOC: Apply "sidebar-search-bordered" class the below search form to have bordered search box -->
			<!-- DOC: Apply "sidebar-search-bordered sidebar-search-solid" class the below search form to have bordered & solid search box -->
			<form class="sidebar-search " action="extra_search.html" method="POST">
				<a href="javascript:;" class="remove">
				<i class="icon-close"></i>
				</a>
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Search..." />
					<span class="input-group-btn">
					<a href="javascript:;" class="btn submit"><i class="icon-magnifier"></i></a>
					</span>
				</div>
			</form>
			<!-- END RESPONSIVE QUICK SEARCH FORM -->
		</li>
		<li class="start">
			<a href="javascript:;">
			<i class="icon-home"></i>
			<span class="title">Dashboard</span>
			<span class="selected"></span>
			<span class="arrow open"></span>
			</a>
			<ul class="sub-menu">
				<li class="active">
					<a href="{:U('Dashboard/index');}">
					<i class="icon-bar-chart"></i>
					Default Dashboard</a>
				</li>
				<li>
					<a href="{:U('Dashboard/showDataMoneyAnalysis');}">
					<i class="icon-bar-chart"></i>
					Data Analysis</a>
				</li>
			</ul>
		</li>
		<li class="active open">
			<a href="javascript:;">
			<i class="icon-basket"></i>
			<span class="title">eCommerce</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<if condition="$fflag eq 1">
					<li>
						<a href="{:U('Order/showDataAnalysisPage');}">
						<i class="icon-home"></i>
						Dashboard</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=2');}">
						<i class="icon-bell"></i>
						<span class="badge badge-danger">{$cin}</span>
						Orders Ongoing</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=4');}">
						<i class="fa fa-warning"></i>
						<span class="badge badge-danger">{$cin1}</span>
						<font color="red">Orders Warning</font></a>
					</li>
					<li class="active">
						<a href="{:U('Order/orderlist?flag=1');}">
						<i class="fa fa-lock"></i>
						Complete Orders</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=3');}">
						<i class="icon-basket"></i>
						Orders All</a>
					</li>
					<li>
						<a href="#">
							<i class="icon-bar-chart"></i>
							Data Analysis
						</a>
					</li>
				<elseif condition="$fflag eq 2"/>
					<li>
						<a href="{:U('Order/showDataAnalysisPage');}">
						<i class="icon-home"></i>
						Dashboard</a>
					</li>
					<li class="active">
						<a href="{:U('Order/orderlist?flag=2');}">
						<i class="icon-bell"></i>
						<span class="badge badge-danger">{$cin}</span>
						Orders Ongoing</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=4');}">
						<i class="fa fa-warning"></i>
						<span class="badge badge-danger">{$cin1}</span>
						<font color="red">Orders Warning</font></a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=1');}">
						<i class="fa fa-lock"></i>
						Complete Orders</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=3');}">
						<i class="icon-basket"></i>
						Orders All</a>
					</li>
					<li>
						<a href="#">
							<i class="icon-bar-chart"></i>
							Data Analysis
						</a>
					</li>
				<elseif condition="$fflag eq 4"/>
					<li>
						<a href="{:U('Order/showDataAnalysisPage');}">
						<i class="icon-home"></i>
						Dashboard</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=2');}">
						<i class="icon-bell"></i>
						<span class="badge badge-danger">{$cin}</span>
						Orders Ongoing</a>
					</li>
					<li class="active">
						<a href="{:U('Order/orderlist?flag=4');}">
						<i class="fa fa-warning"></i>
						<span class="badge badge-danger">{$cin1}</span>
						<font color="red">Orders Warning</font></a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=1');}">
						<i class="fa fa-lock"></i>
						Complete Orders</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=3');}">
						<i class="icon-basket"></i>
						Orders All</a>
					</li>
					<li>
						<a href="#">
							<i class="icon-bar-chart"></i>
							Data Analysis
						</a>
					</li>
				<else />
					<li>
						<a href="{:U('Order/showDataAnalysisPage');}">
						<i class="icon-home"></i>
						Dashboard</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=2');}">
						<i class="icon-bell"></i>
						<span class="badge badge-danger">{$cin}</span>
						Orders Ongoing</a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=4');}">
						<i class="fa fa-warning"></i>
						<span class="badge badge-danger">{$cin1}</span>
						<font color="red">Orders Warning</font></a>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=1');}">
						<i class="fa fa-lock"></i>
						Complete Orders</a>
					</li>
					<li class="active">
						<a href="{:U('Order/orderlist?flag=3');}">
						<i class="icon-basket"></i>
						Orders All</a>
					</li>
					<li>
						<a href="#">
							<i class="icon-bar-chart"></i>
							Data Analysis
						</a>
					</li>
				</if>

			</ul>
		</li>
		<li>
			<a href="javascript:;">
				<i class="fa fa-code"></i>
				<span class="title">Workers</span>
				<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Worker/showDataAnalysisPage');}">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Worker/workerRecommandPage');}">
						<i class="fa fa-smile-o" aria-hidden="true"></i>
						Workers Recommand
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist');}">
						<i class="fa fa-list" aria-hidden="true"></i>
						ALL Workers Workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=4');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						free workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=5');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						busy workers
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=2');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						Income > 0
					</a>
				</li>
				<li >
					<a href="{:U('Worker/workerlist?type=1');}">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						Income = 0
					</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist?type=3');}">
						<i class="fa fa-user-times" aria-hidden="true"></i>
						dead workers
					</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="fa fa-wrench" aria-hidden="true"></i>
			<span class="title">Tools</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Tool/exchangeToolPage');}">
						<i class="fa fa-exchange" aria-hidden="true"></i> Transfer Tools
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-settings"></i>
			<span class="title">Configuration</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Configure/exchangelist');}">
						<i class="fa fa-line-chart" aria-hidden="true"></i>
						Exchange Rate
					</a>
				</li>
				<li>
					<a href="{:U('Configure/techlist');}">
						<i class="fa fa-microchip" aria-hidden="true"></i>
						Technologies Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/tradelist');}">
						<i class="fa fa-info-circle" aria-hidden="true"></i>
						Trade Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/shortcutlistpage');}">
						<i class="fa fa-sliders" aria-hidden="true"></i>
						Shortcut Conf
					</a>
				</li>
				<li>
					<a href="{:U('Configure/tipslist');}">
						<i class="fa fa-calendar-check-o" aria-hidden="true"></i>
						Tips Conf
					</a>
				</li>

			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="fa fa-shield" aria-hidden="true"></i>
			<span class="title">Security</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Security/orderRecordPage');}">
						<i class="fa fa-list" aria-hidden="true"></i> Order Check
					</a>
				</li>
				<li >
					<a href="{:U('Security/sshRecordPage');}">
						<i class="fa fa-user-secret" aria-hidden="true"></i> SSH Check
					</a>
				</li>
			</ul>
		</li>
	</ul>
</block>
<block name="container">
	<div class="page-content">
			<!-- BEGIN PAGE HEADER-->
			<h3 class="page-title">
			Orders <small>edit order</small>
			</h3>
			<div class="page-bar">
				<ul class="page-breadcrumb">
					<li>
						<i class="fa fa-home"></i>
						<a href="{:U('Dashboard/index');}">Home</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">eCommerce</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<if condition="$fflag eq 1">
							<a href="{:U('Order/orderlist?flag=1');}">Complete Orders</a>
						<elseif condition="$fflag eq 2" />
							<a href="{:U('Order/orderlist?flag=2');}">Ongoing Orders</a>
						<elseif condition="$fflag eq 4" />
							<a href="{:U('Order/orderlist?flag=4');}">Warning Orders</a>
						<else />
							<a href="{:U('Order/orderlist?flag=3');}">Orders All</a>
						</if>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">Edit Order</a>
					</li>
				</ul>
				<div class="page-toolbar">
					<div class="btn-group pull-right">
						<button type="button" class="btn btn-fit-height grey-salt dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true">
						Actions <i class="fa fa-angle-down"></i>
						</button>
						<ul class="dropdown-menu pull-right" role="menu">
							<li>
								<a href="#">Action</a>
							</li>
							<li>
								<a href="#">Another action</a>
							</li>
							<li>
								<a href="#">Something else here</a>
							</li>
							<li class="divider">
							</li>
							<li>
								<a href="#">Separated link</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- END PAGE HEADER-->
			<!-- BEGIN PAGE CONTENT-->
			<div class="row">
				<div class="col-md-12 ">
					<!-- BEGIN SAMPLE FORM PORTLET-->
					<div class="portlet box purple ">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-gift"></i> OrderID #{$orderinfo.orderid}
							</div>
							<div class="tools">
								<a href="" class="collapse">
								</a>
								<a href="#portlet-config" data-toggle="modal" class="config">
								</a>
								<a href="" class="reload">
								</a>
								<a href="" class="remove">
								</a>
							</div>
						</div>
						<div class="portlet-body form">
							<form class="form-horizontal" action="{:U('Order/orderupdate?encurl='.$encurl.'&flag='.$fflag.'');}" method="post"  role="form">
								<div class="form-body">
									<div class="col-md-4">
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Order ID</label>
												<div class="col-md-8">
													<input name="orderid" type="text" value="{$orderinfo.orderid}" class="form-control input-inline input-medium" readonly />
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Guest Wechat ID</label>
												<div class="col-md-8">
													<input name="guest_wxid" type="text" placeholder="Guest Wechat ID" class="form-control input-inline input-medium" value="{$orderinfo.gwxid}" required />
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Guest Wechat Name</label>
												<div class="col-md-8">
													<input name="guest_wxname" type="text" placeholder="Guest Wechat Name" class="form-control input-inline input-medium" value="{$orderinfo.gwxname}"  required />
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Project Name</label>
												<div class="col-md-8">
													<div class="ms-ctn form-control ms-as-string " style="" id="ms-emails"><span class="ms-helper " style="display: inline;"></span><div class="ms-sel-ctn"><input class="form-control input-inline input-large" type="text" placeholder="Enter project name ..." required /></div><div class="ms-trigger"><div class="ms-trigger-ico"></div></div></div>
													<!--<input name="projectname" type="text" placeholder="Project name" class="form-control" required>-->
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Guest deadline</label>
												<div class="col-md-8">
													<div class="input-group date form_meridian_datetimenew" data-date="{$dateform}">
														<input name="g_deadtime" type="text" size="10" class="form-control input-inline" placeholder="Guest deadline" value="{$orderinfo.g_deadline}" required />
														<span class="input-group-btn">
														<button class="btn default date-reset" type="button"><i class="fa fa-times"></i></button>
														<button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
														</span>
													</div>
												</div>
											</div>
										    <div class="form-group">
												<label class="col-md-4 control-label">Paymethod</label>
												<div class="col-md-8">
													<div class="radio-list">
														<label class="radio-inline">
														<if condition="$orderinfo['paymethod'] eq 'Wechat'">
															<input type="radio" name="paymethod" value="Wechat" checked /> Wechat
														<else />
															<input type="radio" name="paymethod" value="Wechat" /> Wechat
														</if>
														</label>
														<label class="radio-inline">
															<if condition="$orderinfo['paymethod'] eq 'Paypal'">
																<input type="radio" name="paymethod" value="Paypal" checked /> Paypal
															<else />
																<input type="radio" name="paymethod" value="Paypal" /> Paypal
															</if>

														</label>
													</div>
													<div class="radio-list">
														<label class="radio-inline">
															<if condition="$orderinfo['paymethod'] eq 'Alipay'">
																<input type="radio" name="paymethod" value="Alipay" checked />  Alipay
															<else />
																<input type="radio" name="paymethod" value="Alipay" />  Alipay
															</if>
														</label>
														<label class="radio-inline">
															<if condition="$orderinfo['paymethod'] eq 'Taobao'">
																<input type="radio" name="paymethod" value="Taobao" checked /> Taobao
															<else />
																<input type="radio" name="paymethod" value="Taobao" /> Taobao
															</if>
														</label>

													</div>
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Currency Type</label>
												<div class="col-md-8">
													<input name="moneytype" class="form-control input-inline input-medium" value="{$orderinfo.moneytype}" readonly />
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Total Price</label>
												<div class="col-md-8">
													<input name="totalprice" type="numbe"  min="0" step="0.01" class="form-control input-inline input-medium" value="{$orderinfo.totalprice}" required />
												</div>
											</div>
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Guarantee</label>
												<div class="col-md-8">
													<input id="g_guarantee" name="guarantee" type="number" min="0" step="0.01" class="form-control input-inline input-medium" value="{$orderinfo.guarantee}" required />
												</div>
											</div>
											<!--
												0. guest have no paid gurrentee
												1. guest have paid gurrentee
												2. guest have pain all money
											-->
											<!--
												0. no
												1. worker is doing
												2. worker has completed and no pay
												3. worker has completed and paid
											-->
											<div class="form-group has-error">
												<label class="col-md-4 control-label">Guest state</label>
												<div class="col-md-8">
													<select id="g_state" name="g_state" class="form-control input-inline input-large">
														<if condition="$orderinfo.g_state eq 0 ">
															<option value="0" selected >Guest have no paid gurrentee</option>
															<option value="1">Guest have only paid gurrentee</option>
															<option value="2">Guest have pain all money</option>
														<elseif condition="$orderinfo.g_state eq 1"/>
															<option value="0">Guest have no paid gurrentee</option>
															<option value="1" selected>Guest have paid gurrentee</option>
															<option value="2">Guest have pain all money</option>
														<else />
															<option value="0">Guest have no paid gurrentee</option>
															<option value="1">Guest have paid gurrentee</option>
															<option value="2" selected>Guest have pain all money</option>
														</if>
													</select>
												</div>
											</div>
											<hr/>
											<div class="form-group">
												<label class="col-md-4 control-label">Select worker</label>
												<div class="col-md-8">
													<input id="oriid" name="oriid" type="hidden" value="{$orderinfo[wxid]}" readonly />
													<div class="ms-ctn form-control ms-as-string " style="" id="ms-workers"><span class="ms-helper " style="display: inline;"></span><div class="ms-sel-ctn"><input class="form-control input-inline input-large" type="text" placeholder="Enter project name ..." required /></div><div class="ms-trigger"><div class="ms-trigger-ico"></div></div></div>
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-4 control-label">Worker deadline</label>
												<div class="col-md-8">
													<div class="input-group date form_meridian_datetimenew" data-date="{$dateform}">
														<input name="w_deadline" type="text" size="10" class="form-control input-inline " placeholder="Worker deadline" value="{$orderinfo.w_deadline}" />
														<span class="input-group-btn">
														<button class="btn default date-reset" type="button"><i class="fa fa-times"></i></button>
														<button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
														</span>
													</div>
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-4 control-label">Worker salary</label>
												<div class="col-md-8">
													<input name="w_payment" type="number" min="0" step="0.01" class="form-control input-inline input-medium" value="{$orderinfo.w_payment}" />
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-4 control-label">Worker state</label>
												<div class="col-md-8">
													<select name="w_state" class="form-control input-inline input-large">
														<if condition="$orderinfo.w_state eq 0 ">
															<option value="0" selected>null</option>
															<option value="1">worker is doing</option>
															<option value="2">worker has completed and no pay</option>
															<option value="3">worker has completed and paid</option>
															<option value="4">worker has completed and no give</option>
														<elseif condition="$orderinfo.w_state eq 1"/>
															<option value="0">null</option>
															<option value="1" selected>worker is doing</option>
															<option value="2">worker has completed and no pay</option>
															<option value="3">worker has completed and paid</option>
															<option value="4">worker has completed and no give</option>
														<elseif condition="$orderinfo.w_state eq 2"/>
															<option value="0">null</option>
															<option value="1">worker is doing</option>
															<option value="2" selected>worker has completed and no pay</option>
															<option value="3">worker has completed and paid</option>
															<option value="4">worker has completed and no give</option>
														<elseif condition="$orderinfo.w_state eq 4"/>
															<option value="0">null</option>
															<option value="1">worker is doing</option>
															<option value="2">worker has completed and no pay</option>
															<option value="3">worker has completed and paid</option>
															<option value="4" selected>worker has completed and no give</option>
														<else />
															<option value="0">null</option>
															<option value="1">worker is doing</option>
															<option value="2">worker has completed and no pay</option>
															<option value="3" selected>worker has completed and paid</option>
															<option value="4">worker has completed and no give</option>
														</if>
													</select>
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-4 control-label">Description</label>
												<div class="col-md-8">
													<textarea name="description" class="form-control input-inline input-medium" rows="3">{$orderinfo.description}</textarea>
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-4 control-label"></label>
												<div class="col-md-8">
													<button type="submit" class="btn green">Submit</button>
													<a type="button" href="{:U('Order/orderlist?flag='.$fflag.'');}" class="btn default">Cancel</a>
												</div>
											</div>

									</div>
									<!--
									show recommand user list
									-->
									<div class="col-md-5">
											<div class="portlet box purple" >
												<div class="portlet-title">
													<div class="caption">
														<i class="fa fa-gift"></i>Recomand Olders
														<span class="label label-sm label-success">Complete</span>
														<span class="label label-sm label-danger">Ongoing</span>
														<span class="label label-sm label-warning">Unpaid</span>
														<span class="label label-sm label-primary">Attr</span>
														<span class="label label-sm label-info">Remark</span>
													</div>
													<div class="tools">
														<a href="javascript:;" class="collapse" data-original-title="" title="">
														</a>
														<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
														</a>
														<a href="javascript:;" class="reload" data-original-title="" title="">
														</a>
													</div>
												</div>
												<div class="portlet-body" >
													<h6><span class="text-success" id="oldworkernum"></span></h6>
														<div style="max-height:630px;overflow-y: scroll; ">

															<table class="table table-striped table-advance table-hover">
																<tbody id="ShowOldWorkers">

																</tbody>
															</table>
														</div>
												</div>
											</div>
									</div>
									<div class="col-md-3">
											<div class="portlet box blue" >
												<div class="portlet-title">
													<div class="caption">
														<i class="fa fa-gift"></i>Recomand Newers
													</div>
													<div class="tools">
														<a href="javascript:;" class="collapse" data-original-title="" title="">
														</a>
														<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
														</a>
														<a href="javascript:;" class="reload" data-original-title="" title="">
														</a>
													</div>
												</div>
												<div class="portlet-body" >
													<h6><span class="text-success" id="newworkernum"></span></h6>
														<div style="max-height:630px;overflow-y: scroll; ">
															<table class="table table-striped table-advance table-hover">
																<tbody id="ShowNewWorkers">
																	<tr class="unread" data-messageid="1">

																	</tr>
																</tbody>
															</table>
														</div>
												</div>
											</div>
									</div>



								</div>
								<div >
									<div class="row">
									</div>
								</div>
							</form>



						</div>
					</div>
					<!-- END SAMPLE FORM PORTLET-->
					<!-- BEGIN SAMPLE FORM PORTLET-->

					<!-- END SAMPLE FORM PORTLET-->
					<!-- BEGIN SAMPLE FORM PORTLET-->

				</div>
			</div>
			<!-- END PAGE CONTENT-->
		</div>
</block>
<block name="footscript">
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/clockface/js/clockface.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/moment.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="__PUBLIC__/metronic3_7/assets/global/scripts/metronic.js" type="text/javascript"></script>
	<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
	<script src="__PUBLIC__/metronic3_7/assets/admin/pages/scripts/components-pickers.js"></script>

		<!-- END PAGE LEVEL SCRIPTS -->
		<script>
			jQuery(document).ready(function() {
				// initiate layout and plugins
				Metronic.init(); // init metronic core components
				Layout.init(); // init current layout
				ComponentsPickers.init();
	    });
			/*auto fill*/
			$(function() {
				var myarray={:json_encode($teches)};
				var techinit ={:json_encode($techinit)};
				console.log(techinit);
				init(techinit);
				var ms = $('#ms-emails').magicSuggest({
					placeholder: 'Select technologies label ...',
					data: myarray,
					valueField: 'email',
					value:techinit,
					renderer: function(data){
							return data.email + ' (<b>' + data.name + '</b>)';
					},
					resultAsString: true,
					name: "projectname"
				});
				$(ms).on('selectionchange', function(e,m){
					//console.log(ms.getSelection());
					var res = ms.getSelection();
					console.log(res);
					var datas = [];
					for(var i=0;i< res.length;i++){
						if(res[i]["email"] != res[i]["name"]){
							//console.log(res[i]);
							datas.push(res[i]);

						}
					}
					console.log(datas);
					$.ajax({
						url: "{:U('Order/ajaxRecommand');}", // server url
						type: 'POST', //POST or GET
						data: {"data":datas}, // data to send in ajax format or querystring format
						datatype: 'json',
						success: function(data) {
							//callback(data); // return data in callback
							//console.log(data[0]);
							showOldWorkers(data[0],"#oldworkernum","#ShowOldWorkers");
							showNewWorkers(data[1],"#newworkernum","#ShowNewWorkers");
						},
						error: function(xhr, status, error) {
								alert(xhr.responseText);
						}
					});
				});
				/*select workers*/
				var workers ={:json_encode($workers)};
				var worker ={:json_encode($worker)};
				//console.log(workers);
				for(var i=0;workers != null && i < workers.length;i++){
					workers[i]["name"] = workers[i]["name"]+"("+workers[i]["email"] + ")";

				}
				for(var i=0;worker != null && i<worker.length;i++){
					worker[i]["name"] = worker[i]["name"]+"("+worker[i]["email"] + ")";

				}
				var ms1 = $('#ms-workers').magicSuggest({
					placeholder: 'Select workers ...',
					data: workers,
					valueField: 'email',
					value:worker,
					renderer: function(data){
							return data.name ;
					},
					resultAsString: true,
					name: "wxid"
				});
				$("#ShowOldWorkers").on("click","a", function() {
					//console.log($(this).attr("id"));
					var id = $(this).attr("id")

					$( "#oriid" ).val( id.split("|")[0]);
					ms1.setSelection([{email:id.split("|")[0], name:id.split("|")[1]+"("+id.split("|")[0]+")"}]);

				});
				$("#ShowNewWorkers").on("click","a", function() {
					//console.log($(this).attr("id"));
					var id = $(this).attr("id");
					$( "#oriid" ).val( id.split("|")[0]);
					ms1.setSelection([{email:id.split("|")[0], name:id.split("|")[1]+"("+id.split("|")[0]+")"}]);
				});

			});
			function init(res){
				var datas = [];
				for(var i=0;res != null && i<res.length;i++){
					if(res[i]["email"] != res[i]["name"]){
						//console.log(res[i]);
						datas.push(res[i]);

					}
				}
				//console.log(datas);
				$.ajax({
					url: "{:U('Order/ajaxRecommand');}", // server url
					type: 'POST', //POST or GET
					data: {"data":datas}, // data to send in ajax format or querystring format
					datatype: 'json',
					success: function(data) {
						//callback(data); // return data in callback
						//console.log(data[1]);
						//console.log(data[0]);
						showOldWorkers(data[0],"#oldworkernum","#ShowOldWorkers");
						showNewWorkers(data[1],"#newworkernum","#ShowNewWorkers");
					},
					error: function(xhr, status, error) {
							alert(xhr.responseText);
					}
				});
			}
			/* show workers*/
			function showOldWorkers(data,numlabel,showtbody){

				$(numlabel).html('<i class="fa fa-users"></i>  recommand total workers '+data.length);
				$(showtbody).html("");
				for(var i=0;i<data.length;i++){
						var trc = '\
<td><small><i class="fa fa-paperclip"></i> '+ (i+1) +'\
<br><i class="fa fa-star text-danger"></i> <font color="red">'+ data[i].mark_sum +'</font></small>\
</td>\
<td class="view-message">\
<a href="javascript:;" class="name"><small><strong>'+ data[i].wxname +'</strong><br>'+ data[i].wxid +'</small></a>\
</td>\
<td class="view-message ">\
<span class="label label-sm label-danger"><small><strong>'+ data[i].orderonging +'</strong></small></span>\
<span class="label label-sm label-warning"><small><strong>'+ data[i].orderunpaid +'</strong></small></span>\
<span class="label label-sm label-success"><small>'+ data[i].ordercomplete +'</small></span>\
<span class="label label-sm bg-purple"><small>'+ data[i].attrsimple +'</small></span>\
</td>\
<td class="view-message text-right">\
<span class="label label-sm label-success"><small>'+ data[i].mark_ordercomplete +'</small></span>\
<span class="label label-sm label-danger"><small>'+ data[i].mark_orderongoing +'</small></span>\
<span class="label label-sm label-primary"><small>'+ data[i].mark_attrs +'</small></span>\
<span class="label label-sm label-info"><small>'+ data[i].mark_remark +'</small></span>\
</td>\
<td class="view-message text-right">\
<a type="button" class="btn btn-xs red" id="'+data[i].wxid +"|"+ data[i].wxname+'"><i class="fa fa-user-plus" aria-hidden="true"></i></a>\
</td>\
';
					$(showtbody).append($('<tr class="unread"></tr>').append(trc));
			}
		}
		function showNewWorkers(data,numlabel,showtbody){
			$(numlabel).html('<i class="fa fa-users"></i>  recommand total workers '+data.length);
			$(showtbody).html("");
			for(var i=0;i<data.length;i++){
				var trc='\
<td class="view-message" style="width:auto">\
<a href="javascript:;" class="name"><small><strong>'+ (i+1) +'.  '+ data[i].wxname +'</strong><br>'+ data[i].wxid +'</small></a>\
</td>\
<td class="view-message ">\
<span class="label label-sm label-danger"><small>\
'+ data[i].addtime.split(" ")[0] +'\
</small></span>\
<span class="label label-sm bg-purple"><small><strong>\
'+ data[i].attrsimple +'\
</small></strong></span>\
</td>\
<td class="view-message text-right">\
<a class="btn btn-xs purple" id="'+data[i].wxid +"|"+ data[i].wxname+'" ><i class="fa fa-user-plus" aria-hidden="true"></i></a>\
</td>\
			';
			$(showtbody).append($('<tr class="unread"></tr>').append(trc));
			}
		}
		$("input[name='paymethod']").bind("click",function(){
			var moneytype = "RMB";
			if($(this).val() == "Paypal"){
				moneytype = "USD";
			}

			$("input[name='moneytype']").val(moneytype);
			//alert($(this).val());

		});
	$('#g_guarantee').bind('input propertychange', function() {
			    //console.log($('#g_guarantee').val());
				if($('#g_guarantee').val() > 0){
					$("#g_state").val("1");
				}else if($('#g_guarantee').val() == 0)
				{
					$("#g_state").val("0");
				}
					//getGuestWxname($('#g_wxid').val());
			});
			</script>
</block>
